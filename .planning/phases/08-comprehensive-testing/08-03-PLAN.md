---
phase: 08-comprehensive-testing
plan: 03
type: execute
domain: testing
---

<objective>
Unit tests for Svelte stores: auth, repos, and other store modules.

Purpose: Verify store state management logic works correctly.
Output: Complete test coverage for all Svelte stores.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-phase.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@src/lib/stores/auth.ts
@src/lib/stores/repos.ts
@src/lib/stores/toast.ts
@src/lib/stores/toast.test.ts (existing pattern to follow)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Auth Store Unit Tests</name>
  <files>src/lib/stores/auth.test.ts</files>
  <action>
Create tests for auth store following toast.test.ts patterns:

**Initial state tests:**
- Store starts with null user
- isAuthenticated derived store returns false initially

**setUser tests:**
- Sets user correctly
- isAuthenticated returns true after setUser
- Handles user with all required fields

**clearUser tests:**
- Clears user to null
- isAuthenticated returns false after clearUser

**State transitions:**
- Can set user after clearing
- Can clear user after setting

Use vitest with svelte/store's get() helper.
  </action>
  <verify>npm run test:unit -- src/lib/stores/auth.test.ts passes</verify>
  <done>8+ tests for auth store</done>
</task>

<task type="auto">
  <name>Task 2: Repos Store Unit Tests</name>
  <files>src/lib/stores/repos.test.ts</files>
  <action>
Create tests for repos store:

**Initial state tests:**
- Store starts with empty repos array
- Loading state is false initially

**setRepos tests:**
- Sets repos array correctly
- Replaces existing repos

**addRepo tests:**
- Adds repo to existing list
- Handles first repo added

**removeRepo tests:**
- Removes repo by ID
- Handles non-existent ID gracefully
- Maintains other repos

**Loading state tests:**
- setLoading updates loading state
- Can toggle loading on/off

Use vitest with get() helper from svelte/store.
  </action>
  <verify>npm run test:unit -- src/lib/stores/repos.test.ts passes</verify>
  <done>10+ tests for repos store</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] All store tests pass
- [ ] Tests follow existing toast.test.ts patterns
- [ ] No TypeScript errors
</verification>

<success_criteria>
- All tasks completed
- 18+ new unit tests
- All stores have test coverage
- Consistent test patterns across store tests
</success_criteria>

<output>
After completion, create `.planning/phases/08-comprehensive-testing/08-03-SUMMARY.md`
</output>
